<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title th:text="${titulo.id} != null ? 'Editar título' : 'Nuevo título'">Título</title>

  <!-- Bootstrap -->
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
        rel="stylesheet">
  <link th:href="@{/css/style.css}" rel="stylesheet"/>
</head>

<body>

<nav class="navbar navbar-inverse navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed"
              data-toggle="collapse" data-target="#navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">MyGameCollection</a>
    </div>
  </div>
</nav>

<div class="container" style="margin-top:80px;">
  <div class="row">
    <div class="col-md-offset-2 col-md-8">

      <h1 th:text="${titulo.id} != null ? 'Editar título' : 'Nuevo título'"></h1>

      <form method="post"
            th:action="@{/admin/titulo/nuevo/submit}"
            th:object="${titulo}">

        <input type="hidden" th:field="*{id}"/>

        <!-- NOMBRE -->
        <div class="form-group">
          <label>Nombre</label>
          <input type="text" class="form-control"
                 th:field="*{nombre}" required/>
        </div>

        <!-- SLES -->
        <div class="form-group">
          <label>SLES</label>
          <input type="text" class="form-control"
                 th:field="*{sles}"/>
        </div>

        <!-- IMAGEN -->
        <div class="form-group">
          <label>Imagen</label>

          <input type="text"
                 class="form-control"
                 th:field="*{imagen}"
                 id="imagen"
                 readonly/>

          <br>

          <button type="button"
                  class="btn btn-default"
                  onclick="document.getElementById('imagenFile').click()">
            Añadir imagen
          </button>

          <input type="file"
                 id="imagenFile"
                 accept="image/*"
                 style="display:none;">
        </div>

        <!-- TRAILER -->
        <div class="form-group">
          <label>Trailer</label>
          <input type="text" class="form-control"
                 th:field="*{trailer}"/>
        </div>

        <!-- FECHA -->
        <div class="form-group">
          <label>Fecha de lanzamiento</label>
          <input type="date" class="form-control"
                 th:field="*{fechaLanzamiento}"/>
        </div>

        <!-- DESCRIPCIÓN -->
        <div class="form-group">
          <label>Descripción</label>
          <textarea class="form-control"
                    th:field="*{descripcion}"
                    rows="4"></textarea>
        </div>

        <!-- OBSERVACIONES -->
        <div class="form-group">
          <label>Observaciones</label>
          <textarea class="form-control"
                    th:field="*{observacion}"
                    rows="3"></textarea>
        </div>

        <!-- PLATAFORMA -->
        <div class="form-group">
          <label>Plataforma</label>
          <select class="form-control" th:field="*{plataforma}">
            <option value="">---</option>
            <option th:each="p : ${plataformas}"
                    th:value="${p.id}"
                    th:text="${p.nombre}"></option>
          </select>
        </div>

        <!-- REGIÓN -->
        <div class="form-group">
          <label>Región</label>
          <select class="form-control" th:field="*{region}">
            <option value="">---</option>
            <option th:each="r : ${regiones}"
                    th:value="${r.id}"
                    th:text="${r.nombre}"></option>
          </select>
        </div>

        <!-- GÉNEROS (2 COLUMNAS) -->
        <div class="form-group">
          <label>Géneros</label>

          <div class="row">
            <div class="col-md-6"
                 th:each="g, stat : ${generos}"
                 th:if="${stat.index % 2 == 0}">
              <div class="checkbox">
                <label>
                  <input type="checkbox"
                         th:value="${g.id}"
                         th:field="*{generos}">
                  <span th:text="${g.nombre}"></span>
                </label>
              </div>
            </div>

            <div class="col-md-6"
                 th:each="g, stat : ${generos}"
                 th:if="${stat.index % 2 == 1}">
              <div class="checkbox">
                <label>
                  <input type="checkbox"
                         th:value="${g.id}"
                         th:field="*{generos}">
                  <span th:text="${g.nombre}"></span>
                </label>
              </div>
            </div>
          </div>
        </div>

        <hr>

        <button type="submit" class="btn btn-primary">Guardar</button>
        <a th:href="@{/}" class="btn btn-default">Cancelar</a>

      </form>

    </div>
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<script>
  document.getElementById('imagenFile').addEventListener('change', function () {
    if (this.files.length > 0) {
      document.getElementById('imagen').value = this.files[0].name;
    }
  });
</script>

</body>
</html>
